<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Leaply - Your Gateway to International Education</title>
    <meta name="description" content="Find your perfect university or scholarship abroad with Leaply's intelligent matching platform. Get personalized guidance for your international education journey.">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/assets/css/style.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/icon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/icon.ico">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <a href="#" class="logo">
                <img src="/Logo.png" alt="Leaply Logo" class="logo-image">

            </a>
            
            <nav class="nav">
                <ul class="nav-list">
                    <li><a href="/" class="nav-link active">Home</a></li>
                    <li><a href="/search" class="nav-link">Explore</a></li>
                    <li><a href="/applications" class="nav-link">Applications</a></li>
                    <li><a href="/ai-guide" class="nav-link">Persona Lab</a></li>
                    <li><a href="/dashboard" class="nav-link">Dashboard</a></li>
                </ul>
            </nav>
            
            <button class="mobile-menu-toggle">‚ò∞</button>
        </div>
        
        <!-- Mobile Navigation -->
        <nav class="mobile-nav">
            <ul class="nav-list">
                <li><a href="/" class="nav-link active">Home</a></li>
                <li><a href="/search" class="nav-link">Explore</a></li>
                <li><a href="/applications" class="nav-link">Applications</a></li>
                <li><a href="/ai-guide" class="nav-link">Persona Lab</a></li>
                <li><a href="/dashboard" class="nav-link">Dashboard</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-logo"></div>
                <h1>Study abroad, simplified by Leaply</h1>
                <p class="tagline">Get personalized university matches, application tracking, and intelligent essay guidance - all in one place.</p>
                <div class="cta-buttons">
                    <a href="/dashboard" class="btn btn-primary btn-large">Get Started Free</a>
                    <a href="/#features" class="btn btn-secondary btn-large">Explore Features</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Benefits Section -->
    <section id="features" class="section">
        <div class="container">
            <h2 class="text-center mb-xl">Complete Application Suite</h2>
            <div class="grid grid-3">
                <div class="card">
                    <div class="card-icon">üë§</div>
                    <h3>Profile Management</h3>
                    <p class="card-description">Build a comprehensive academic profile with GPA, test scores, achievements, and extracurriculars. Our system uses this to match you with the right opportunities.</p>
                </div>
                <div class="card">
                    <div class="card-icon">üéØ</div>
                    <h3>Smart Matching</h3>
                    <p class="card-description">AI-powered university and scholarship matching based on your profile. Get personalized admission probability assessments for each target school.</p>
                </div>
                <div class="card">
                    <div class="card-icon">üó∫Ô∏è</div>
                    <h3>Application Roadmap</h3>
                    <p class="card-description">Create your target university list and track application requirements. See what's missing, manage deadlines, and stay organized throughout the process.</p>
                </div>
                <div class="card">
                    <div class="card-icon">üë®‚Äçüéì</div>
                    <h3>Mentor Matching</h3>
                    <p class="card-description">Connect with current students and alumni from your target universities. Get insider insights and personalized guidance from those who've been there.</p>
                </div>
                <div class="card">
                    <div class="card-icon">‚úçÔ∏è</div>
                    <h3>Essay Assistant</h3>
                    <p class="card-description">AI-powered essay ideation through profile analysis and self-discovery surveys. Generate unique, authentic essay topics that showcase your story.</p>
                </div>
                <div class="card">
                    <div class="card-icon">üìà</div>
                    <h3>Progress Dashboard</h3>
                    <p class="card-description">Track all applications in one place. Monitor deadlines, requirements, and application status across multiple universities in real-time.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Organic Divider -->
    <div class="section-divider"></div>

    <!-- Featured Universities -->
    <section class="section section-gray">
        <div class="container">
            <h2 class="text-center mb-xl">Featured Universities</h2>
            <!-- Loading State -->
            <div id="universitiesLoading" class="text-center py-5">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-3 text-muted">Loading universities...</p>
            </div>
            <!-- Universities Grid -->
            <div id="featuredUniversities" class="grid grid-3" style="display: none;">
                <!-- Universities will be loaded dynamically -->
            </div>
            <div class="text-center mt-xl">
                <a href="/search" class="btn btn-secondary">View All Universities</a>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="section section-gray">
        <div class="container">
            <div class="text-center">
                <h2>Ready to Start Your Journey?</h2>
                <p class="text-secondary mb-xl">Join thousands of students using AI to simplify their study abroad applications and achieve their dreams.</p>
                <div class="cta-buttons">
                    <a href="/dashboard" class="btn btn-primary btn-large">Get Started Free</a>
                    <a href="/search" class="btn btn-secondary btn-large">Explore Universities</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Leaply</h4>
                    <p>Your trusted AI partner for international education. Connecting ambitious students with world-class opportunities since 2025.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook">üìò</a>
                        <a href="#" aria-label="Twitter">üê¶</a>
                        <a href="#" aria-label="LinkedIn">üíº</a>
                        <a href="#" aria-label="Instagram">üì∑</a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4>Platform</h4>
                    <ul>
                        <li><a href="/dashboard">Dashboard</a></li>
                        <li><a href="/search">Explore Universities</a></li>
                        <li><a href="/applications">My Applications</a></li>
                        <li><a href="/ai-guide">Persona Lab</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="/contact">Contact</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Support</h4>
                    <p>üìß support@leaply.com</p>
                    <p>üìû +84 904 954 246</p>
                    <p>üí¨ Live Chat (9AM - 6PM GMT+7)</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Leaply. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    
    <!-- Data Service -->
    <script src="/assets/js/services/dataService.js"></script>
    
    <!-- JavaScript -->
    <script src="/assets/js/main.js"></script>
    
    <!-- Index Page Specific -->
    <script>
        // Load featured universities when page loads
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Initialize data service
                await dataService.init();
                
                // Get featured universities
                const featuredUniversities = dataService.getFeaturedUniversities(6);
                
                // Render universities
                const container = document.getElementById('featuredUniversities');
                const loading = document.getElementById('universitiesLoading');
                
                if (featuredUniversities.length > 0) {
                    container.innerHTML = featuredUniversities.map(uni => createUniversityCard(uni)).join('');
                    loading.style.display = 'none';
                    container.style.display = 'grid';
                    
                    // Initialize bookmark buttons
                    initializeBookmarkButtons();
                } else {
                    loading.innerHTML = '<p class="text-muted">No featured universities available.</p>';
                }
            } catch (error) {
                console.error('Error loading universities:', error);
                document.getElementById('universitiesLoading').innerHTML = 
                    '<p class="text-danger">Error loading universities. Please refresh the page.</p>';
            }
        });
        
        /**
         * Get logo URL for a university
         */
        function getLogoUrl(university) {
            // First priority: Check for local logo file in /icons directory
            if (university.id) {
                return `/icons/${university.id}.jpg`;
            }
            
            // Final fallback
            return null;
        }

        /**
         * Create HTML for a university card
         */
        function createUniversityCard(uni) {
            const currencySymbols = {
                'USD': '$',
                'GBP': '¬£',
                'EUR': '‚Ç¨',
                'CAD': 'CAD $',
                'AUD': 'AUD $',
                'SGD': 'SGD $',
                'JPY': '¬•',
                'CNY': '¬•',
                'KRW': '‚Ç©',
                'HKD': 'HK$',
                'CHF': 'CHF'
            };
            
            const symbol = currencySymbols[uni.tuition_range.currency] || uni.tuition_range.currency;
            const tuitionDisplay = uni.tuition_range.min === uni.tuition_range.max 
                ? `${symbol}${uni.tuition_range.max.toLocaleString()}`
                : `${symbol}${uni.tuition_range.min.toLocaleString()}-${uni.tuition_range.max.toLocaleString()}`;
            
            // Get logo URL and create logo HTML
            const logoUrl = getLogoUrl(uni);    
            const logoHTML = logoUrl ? `<img src="${logoUrl}" alt="${uni.name}" class="university-logo-img" onerror="this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';">` : '';
            
            return `
                <div class="card university-card" data-university-id="${uni.id}" data-country="${uni.country}" style="position: relative;">
                    <div class="university-logo">${logoHTML}</div>
                    <h3>${uni.name}</h3>
                    <p class="card-location">üìç ${uni.city_or_state}, ${uni.country}</p>
                    <p class="card-description">${uni.description}</p>
                    <div class="card-stats">
                        <span class="stat">Acceptance Rate: ${uni.acceptance_rate}%</span>
                        <span class="stat">Tuition: ${tuitionDisplay}</span>
                    </div>
                    <div class="card-footer mt-3">
                        <a href="university-detail.html?id=${uni.id}" class="btn btn-sm btn-outline-primary">View Details</a>
                    </div>
                </div>
            `;
        }
        
        /**
         * Initialize bookmark button functionality
         */
        function initializeBookmarkButtons() {
            const bookmarkBtns = document.querySelectorAll('.bookmark-btn');
            bookmarkBtns.forEach(btn => {
                const universityId = btn.dataset.universityId;
                
                // Check if already bookmarked
                const bookmarks = JSON.parse(localStorage.getItem('bookmarkedUniversities') || '[]');
                if (bookmarks.includes(universityId)) {
                    btn.querySelector('.bookmark-icon').textContent = '‚òÖ';
                    btn.classList.add('bookmarked');
                }
                
                // Add click handler
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggleBookmark(universityId, btn);
                });
            });
        }
        
        /**
         * Toggle bookmark status
         */
        function toggleBookmark(universityId, btn) {
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedUniversities') || '[]');
            const icon = btn.querySelector('.bookmark-icon');
            
            if (bookmarks.includes(universityId)) {
                // Remove bookmark
                bookmarks = bookmarks.filter(id => id !== universityId);
                icon.textContent = '‚òÜ';
                btn.classList.remove('bookmarked');
                showToast('Removed from bookmarks', 'info');
            } else {
                // Add bookmark
                bookmarks.push(universityId);
                icon.textContent = '‚òÖ';
                btn.classList.add('bookmarked');
                showToast('Added to bookmarks', 'success');
            }
            
            localStorage.setItem('bookmarkedUniversities', JSON.stringify(bookmarks));
        }
        
        /**
         * Show toast notification
         */
        function showToast(message, type = 'info') {
            // Simple toast notification (will be enhanced later)
            const toast = document.createElement('div');
            toast.className = `alert alert-${type} position-fixed top-0 start-50 translate-middle-x mt-3`;
            toast.style.zIndex = '9999';
            toast.textContent = message;
            toast.style.minWidth = '200px';
            toast.style.textAlign = 'center';
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 2000);
        }
    </script>
</body>
</html>
